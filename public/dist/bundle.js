/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./public/js/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./public/js/index.js":
/*!****************************!*\
  !*** ./public/js/index.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_routes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../modules/routes.js */ \"./public/modules/routes.js\");\n/* harmony import */ var _modules_router_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../modules/router.js */ \"./public/modules/router.js\");\n/* harmony import */ var _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../modules/controllers.js */ \"./public/modules/controllers.js\");\n/* harmony import */ var _modules_dispatcher_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../modules/dispatcher.js */ \"./public/modules/dispatcher.js\");\n/* harmony import */ var _modules_factory_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../modules/factory.js */ \"./public/modules/factory.js\");\n\n\n\n\n\n\n\n\nfunction initUIFactory() {\n  var UIFactory = new _modules_factory_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n    'subscriber': _modules_dispatcher_js__WEBPACK_IMPORTED_MODULE_3__[\"subscribeAdapter\"]\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"IndexRoute\"], ['rootEl', 'router', 'controller', 'subscriber', 'loginController', 'signupController'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"userController\"],\n      'loginController': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"loginController\"],\n      'signupController': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"signUpController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LoginRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"loginController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"ProfileRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"userController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SettingsRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"settingsController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SignUpRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"signUpController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LeaderBoardRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"leaderboardController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"AboutRoute\"], ['rootEl', 'router'], {\n    factoryArgs: ['rootEl', 'router']\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"ChatRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"chatController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LogoutRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"logoutController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SinglePlayerRoute\"], ['rootEl', 'router', 'controller', 'subscriber'], {\n    factoryArgs: ['rootEl', 'router'],\n    injections: {\n      'controller': _modules_controllers_js__WEBPACK_IMPORTED_MODULE_2__[\"singlePlayerController\"]\n    }\n  });\n  UIFactory.addConstructor(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"NotFoundRoute\"], ['rootEl', 'router'], {\n    factoryArgs: ['rootEl', 'router']\n  });\n  return UIFactory;\n}\n\nfunction getDefaultLocation() {\n  var loc = window.location.href;\n  var ds = loc.indexOf('//');\n  var newLoc = loc.slice(ds + 2);\n  var ss = newLoc.indexOf('/');\n  newLoc = newLoc.slice(ss);\n  return newLoc;\n}\n/**\n * Function initializing UI\n * @param {Node} root - DOM element\n * @param {Router} router - route object\n */\n\n\nfunction initUI(UIFactory, root, router) {\n  router.addRoute('/', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"IndexRoute\"]));\n  router.addRoute('/login', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LoginRoute\"]));\n  router.addRoute('/profile', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"ProfileRoute\"]));\n  router.addRoute('/settings', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SettingsRoute\"]));\n  router.addRoute('/signup', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SignUpRoute\"]));\n  router.addRoute('/leaderboard', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LeaderBoardRoute\"]));\n  router.addRoute('/about', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"AboutRoute\"]));\n  router.addRoute('/logout', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"LogoutRoute\"]));\n  router.addRoute('/singleplayer', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"SinglePlayerRoute\"]));\n  router.addRoute('/chat', UIFactory.getFabricator(_modules_routes_js__WEBPACK_IMPORTED_MODULE_0__[\"ChatRoute\"]));\n  router.notFoundRouteMaker = UIFactory.newNotFoundRoute;\n  var loc = getDefaultLocation();\n  router.setDefaultRoute(loc);\n  router.init();\n  Object(_modules_router_js__WEBPACK_IMPORTED_MODULE_1__[\"initAnchorsRouting\"])(root, router);\n}\n/**\n * Function registering service worker\n */\n// function registerServiceWorker() {\n//   if ('serviceWorker' in navigator) {\n//     window.addEventListener('load', function() {\n//       navigator.serviceWorker.register('/sw.js').then(function(registration) {\n//         // Registration was successful\n//         console.log('ServiceWorker registration successful with scope: ', registration.scope);\n//       }, function(err) {\n//         // registration failed :(\n//         console.log('ServiceWorker registration failed: ', err);\n//       });\n//     });\n//   }\n// }\n\n\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', function () {\n    navigator.serviceWorker.register('sw.js').then(function (registration) {\n      // Registration was successful\n      console.log('ServiceWorker registration successful with scope: ', registration.scope);\n    }, function (err) {\n      // registration failed :(\n      console.log('ServiceWorker registration failed: ', err);\n    });\n  });\n}\n\nwindow.onload = function () {\n  var root = document.getElementById('root');\n  var router = new _modules_router_js__WEBPACK_IMPORTED_MODULE_1__[\"Router\"](root);\n  var UIFactory = initUIFactory();\n  initUI(UIFactory, root, router); // registerServiceWorker();\n\n  window.addEventListener('fetch', function (request) {\n    console.log(request);\n  });\n};\n\n//# sourceURL=webpack:///./public/js/index.js?");

/***/ }),

/***/ "./public/modules/ajax.js":
/*!********************************!*\
  !*** ./public/modules/ajax.js ***!
  \********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n/** class performing Ajax requests with following callbacks. */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar AjaxModule =\n/*#__PURE__*/\nfunction () {\n  function AjaxModule() {\n    _classCallCheck(this, AjaxModule);\n  }\n\n  _createClass(AjaxModule, [{\n    key: \"doFetch\",\n\n    /**\n     * Make a fetch request.\n     * @param {String} method - GET/POST/... method.\n     * @param {String} path - URL path for making a xhr request.\n     * @param {Object} body - context object for callbacks.\n     * @return {Promise<Response>} - fetch promise returned\n     * @private\n     */\n    value: function doFetch() {\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          _ref$method = _ref.method,\n          method = _ref$method === void 0 ? 'GET' : _ref$method,\n          _ref$path = _ref.path,\n          path = _ref$path === void 0 ? '/' : _ref$path,\n          _ref$body = _ref.body,\n          body = _ref$body === void 0 ? {} : _ref$body;\n\n      // Body must be empty with GET and HEAD requests\n      if (method === 'GET' || method === 'HEAD') {\n        return fetch(path, {\n          method: method,\n          mode: 'cors',\n          credentials: 'include'\n        });\n      } else {\n        var headers = {};\n        var bodyToSend = '';\n\n        if (body instanceof FormData) {\n          bodyToSend = body;\n        } else if (body) {\n          headers = {\n            'Content-Type': 'application/json; charset=utf-8'\n          };\n          bodyToSend = JSON.stringify(body);\n        }\n\n        return fetch(path, {\n          method: method,\n          body: bodyToSend,\n          headers: headers,\n          mode: 'cors',\n          credentials: 'include'\n        });\n      }\n    }\n  }]);\n\n  return AjaxModule;\n}();\n\nvar ajaxModule = new AjaxModule();\n/* harmony default export */ __webpack_exports__[\"default\"] = (ajaxModule);\n\n//# sourceURL=webpack:///./public/modules/ajax.js?");

/***/ }),

/***/ "./public/modules/api.js":
/*!*******************************!*\
  !*** ./public/modules/api.js ***!
  \*******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _ajax_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./ajax.js */ \"./public/modules/ajax.js\");\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar apiPrefix = 'https://api.kpacubo.xyz'; // use upstream api; change to blank for local\n\n/**\n * Class containing methods working with application's API\n */\n\nvar API =\n/*#__PURE__*/\nfunction () {\n  function API() {\n    _classCallCheck(this, API);\n\n    this._userMap = new Map();\n  }\n  /**\n   * doFetch wrapper that returns promises with parsed data\n   * @param {String} method - GET/POST/... method\n   * @param {String} url - target URL\n   * @param {Object} body - request body\n   * @param {String} type - expected response type\n   * @return {Promise<Object|null>} - response body\n   *    parsed into an object\n   * @private\n   */\n\n\n  _createClass(API, [{\n    key: \"_sendRequest\",\n    value: function _sendRequest(method, url, body, type) {\n      var required = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n\n      if (typeof method !== 'string') {\n        throw new TypeError('\\\"method\\\" is not a string');\n      }\n\n      if (typeof url !== 'string') {\n        throw new TypeError('\\\"url\\\" is not a string');\n      }\n\n      if (typeof type !== 'string') {\n        throw new TypeError('\\\"type\\\" is not a string');\n      }\n\n      if (!Array.isArray(required)) {\n        throw new TypeError('\\\"required\\\" is not an Array');\n      }\n\n      return _ajax_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"].doFetch({\n        path: apiPrefix + url,\n        body: body,\n        method: method\n      }).then(function (response) {\n        if (!response.ok) {\n          throw response.statusText;\n        }\n\n        return response.text().then(function (text) {\n          return text ? JSON.parse(text) : null;\n        });\n      }).then(function (data) {\n        if (data && data.status !== 'success') {\n          throw data;\n        }\n\n        return data;\n      }).then(function (response) {\n        if (!response) {\n          return response;\n        }\n\n        if (response.type !== type) {\n          throw 'wrong response type';\n        }\n\n        return response.payload;\n      }).then(function (payload) {\n        if (required.length === 0) {\n          return payload;\n        }\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = required[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var attr = _step.value;\n\n            if (!payload.hasOwnProperty(attr)) {\n              console.log('Lack of property \\\"' + attr + '\\\" in payload');\n              throw 'payload is missing some required fields';\n            }\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return payload;\n      });\n    }\n    /**\n     * API method to register a new user\n     * @param {String} login - user login\n     * @param {String} email - user email\n     * @param {String} password - user password\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"register\",\n    value: function register(login, email, password) {\n      var url = '/api/register';\n      var data = {\n        login: login,\n        email: email,\n        password: password\n      };\n      var required = ['login', 'email', 'score'];\n      return this._sendRequest('POST', url, data, 'reg', required);\n    }\n    /**\n     * API method to authorize a user\n     * @param {String} login - user login\n     * @param {String} password - user password\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"authorize\",\n    value: function authorize(login, password) {\n      var url = '/api/auth';\n      var data = {\n        login: login,\n        password: password\n      };\n      var required = ['login', 'email', 'score'];\n      return this._sendRequest('POST', url, data, 'log', required);\n    }\n    /**\n     * API method to update user login and/or password\n     * @param {String} newLogin - new user login\n     * @param {String} newPassword - new user password\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"updateUserInfo\",\n    value: function updateUserInfo(newLogin, newPassword) {\n      var url = '/api/profile';\n      var data = {\n        login: newLogin,\n        password: newPassword\n      };\n      var required = ['login', 'email', 'score'];\n      return this._sendRequest('PUT', url, data, 'usinfo', required);\n    }\n    /**\n     * API method to get current user's info\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"getUserInfo\",\n    value: function getUserInfo() {\n      var url = '/api/profile';\n      var required = ['login', 'email', 'score'];\n      return this._sendRequest('GET', url, {}, 'usinfo', required);\n    }\n    /**\n     * API method to gey user list for leaderboard\n     * @param {Number} page - page of the leaderboard\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"getUsers\",\n    value: function getUsers(page) {\n      var url = '/api/leaderboard/' + page;\n      var required = ['users'];\n      return this._sendRequest('GET', url, {}, 'uslist', required);\n    }\n    /**\n     * API method to upload user avatar\n     * @param {FormData} avatar - FormData var with avatar file\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"uploadAvatar\",\n    value: function uploadAvatar(avatar) {\n      var url = '/api/upload_avatar';\n      var required = ['login', 'email', 'avatar', 'score'];\n      return this._sendRequest('POST', url, avatar, 'usinfo', required);\n    }\n    /**\n     * API method to logout\n     * @return {Promise<Object|null>} - response body\n     */\n\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var url = '/api/login';\n      return this._sendRequest('DELETE', url, {}, 'logout');\n    }\n  }, {\n    key: \"getUserById\",\n    value: function getUserById(hexId) {\n      var _this = this;\n\n      if (this._userMap.has(hexId)) {\n        return this._userMap[hexId];\n      }\n\n      var url = '/api/user/' + hexId;\n      return this._sendRequest('GET', url, {}, 'usinfo').then(function (payload) {\n        _this._userMap[hexId] = payload;\n        return payload;\n      });\n    }\n  }, {\n    key: \"getHistory\",\n    value: function getHistory() {\n      return fetch('https://chat.kpacubo.xyz:2000/messages')[\"this\"](function (payload) {\n        console.log(payload);\n        return payload;\n      });\n    }\n  }, {\n    key: \"getChatHistory\",\n    value: function getChatHistory() {\n      var method = 'GET';\n      var path = 'https://chat.kpacubo.xyz:2000/messages'; // Body must be empty with GET and HEAD requests\n\n      return fetch(path, {\n        method: method,\n        mode: 'cors' // credentials: 'include',\n\n      }).then(function (response) {\n        if (!response.ok) {\n          throw response.statusText;\n        }\n\n        return response.json();\n      }).then(function (data) {\n        if (!data || data.status !== 'success') {\n          throw data;\n        }\n\n        return data.payload;\n      }); // return this._sendRequest('GET', url, {}, 'usinfo');\n    }\n  }]);\n\n  return API;\n}();\n\nvar apiModule = new API();\n/* harmony default export */ __webpack_exports__[\"default\"] = (apiModule);\n\n//# sourceURL=webpack:///./public/modules/api.js?");

/***/ }),

/***/ "./public/modules/basevalidator.js":
/*!*****************************************!*\
  !*** ./public/modules/basevalidator.js ***!
  \*****************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n/**\n * Class containing validation methods\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar BaseValidator =\n/*#__PURE__*/\nfunction () {\n  function BaseValidator() {\n    _classCallCheck(this, BaseValidator);\n  }\n\n  _createClass(BaseValidator, [{\n    key: \"_correctLength\",\n\n    /**\n     * Checks whether text's length is correct\n     * @param {string} text - text to check the length\n     * @return {boolean} - result of a check\n     * @private\n     */\n    value: function _correctLength(text) {\n      var MIN_LEN = 4;\n      var MAX_LEN = 25;\n      return text.length >= MIN_LEN && text.length <= MAX_LEN;\n    }\n    /**\n     * Checks whether text's length is correct or text is empty\n     * @param {string} text - text to check the length\n     * @return {boolean} - result of a check\n     * @private\n     */\n\n  }, {\n    key: \"_correctLengthOrEmpty\",\n    value: function _correctLengthOrEmpty(text) {\n      return this._correctLength(text) || text.length === 0;\n    }\n    /**\n     * Checks whether email is correct\n     * @param {string} email - email to be tested\n     * @return {boolean} - result of a check\n     * @private\n     */\n\n  }, {\n    key: \"_correctEmail\",\n    value: function _correctEmail(email) {\n      // eslint-disable-next-line\n      var emailRegexp = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n      return Boolean(email.match(emailRegexp));\n    }\n    /**\n     * Checks whether login is correct\n     * @param {string} login - login to be tested\n     * @return {boolean} - result of a check\n     * @private\n     */\n\n  }, {\n    key: \"_correctLogin\",\n    value: function _correctLogin(login) {\n      var loginRegexp = /^[a-zA-Z0-9_]+$/;\n      return Boolean(login.match(loginRegexp));\n    }\n    /**\n     * Checks whether login is correct or empty\n     * @param {string} login - login to be tested\n     * @return {boolean} - result of a check\n     * @private\n     */\n\n  }, {\n    key: \"_correctLoginOrEmpty\",\n    value: function _correctLoginOrEmpty(login) {\n      return login.length === 0 || this._correctLogin(login);\n    }\n    /**\n     * Validates user registration\n     * @param {string} login - user login\n     * @param {string} password - user password\n     * @param {string} email - user email\n     * @param {string} repassword - user password confirmation\n     * @return {*} - error message and name of the field that caused an error\n     */\n\n  }, {\n    key: \"validateRegistration\",\n    value: function validateRegistration(login, password) {\n      var email = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n      var repassword = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n      if (!this._correctLogin(login)) {\n        return {\n          error: 'Login is incorrect',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLength(login)) {\n        return {\n          error: 'Login should be from 4 to 25 symbols long',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLength(password)) {\n        return {\n          error: 'Password should be from 4 to 25 symbols long',\n          errorField: 'password'\n        };\n      }\n\n      if (!this._correctEmail(email)) {\n        return {\n          error: 'Email is incorrect',\n          errorField: 'email'\n        };\n      }\n\n      if (password !== repassword) {\n        return {\n          error: 'Passwords do not match',\n          errorField: 'repeat_password'\n        };\n      }\n\n      return {\n        error: null,\n        errorField: null\n      };\n    }\n    /**\n     * Validates login\n     * @param {string} login - user login\n     * @param {string} password - user password\n     * @return {*} - error message and name of the field that caused an error\n     */\n\n  }, {\n    key: \"validateLogin\",\n    value: function validateLogin(login, password) {\n      if (!this._correctLogin(login)) {\n        return {\n          error: 'Login is incorrect',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLength(login)) {\n        return {\n          error: 'Login should be from 4 to 25 symbols long',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLength(password)) {\n        return {\n          error: 'Password should be from 4 to 25 symbols long',\n          errorField: 'password'\n        };\n      }\n\n      return {\n        error: null,\n        errorField: null\n      };\n    }\n    /**\n     * Validates user data update\n     * @param {string} login - user login\n     * @param {string} password - user password\n     * @param {string} repassword - user password confirmation\n     * @return {*} - error message and name of the field that caused an erro\n     */\n\n  }, {\n    key: \"validateUpdate\",\n    value: function validateUpdate(login, password, repassword) {\n      if (!this._correctLoginOrEmpty(login)) {\n        return {\n          error: 'New login is incorrect',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLengthOrEmpty(login)) {\n        return {\n          error: 'Login should be empty or from 4 to 25 symbols long',\n          errorField: 'login'\n        };\n      }\n\n      if (!this._correctLengthOrEmpty(password)) {\n        return {\n          error: 'Password should be from 4 to 25 symbols long',\n          errorField: 'password'\n        };\n      }\n\n      if (password !== repassword) {\n        return {\n          error: 'Passwords do not match',\n          errorField: 'repeat_password'\n        };\n      }\n\n      return {\n        error: null,\n        errorField: null\n      };\n    }\n  }]);\n\n  return BaseValidator;\n}();\n\nvar validator = new BaseValidator();\n/* harmony default export */ __webpack_exports__[\"default\"] = (validator);\n\n//# sourceURL=webpack:///./public/modules/basevalidator.js?");

/***/ }),

/***/ "./public/modules/controllers.js":
/*!***************************************!*\
  !*** ./public/modules/controllers.js ***!
  \***************************************/
/*! exports provided: leaderboardController, loginController, userController, signUpController, logoutController, settingsController, singlePlayerController, chatController */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"leaderboardController\", function() { return leaderboardController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loginController\", function() { return loginController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"userController\", function() { return userController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"signUpController\", function() { return signUpController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"logoutController\", function() { return logoutController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"settingsController\", function() { return settingsController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"singlePlayerController\", function() { return singlePlayerController; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"chatController\", function() { return chatController; });\n/* harmony import */ var _dispatcher_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dispatcher.js */ \"./public/modules/dispatcher.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./api.js */ \"./public/modules/api.js\");\n/* harmony import */ var _basevalidator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./basevalidator.js */ \"./public/modules/basevalidator.js\");\n/* harmony import */ var _models_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./models.js */ \"./public/modules/models.js\");\n/* harmony import */ var _factory_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./factory.js */ \"./public/modules/factory.js\");\n/* harmony import */ var _gamecontrollers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./gamecontrollers.js */ \"./public/modules/gamecontrollers.js\");\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\n\n/**\n * Class implementing leaderboard logic\n */\n\nvar LeaderboardController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * LeaderboardController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function LeaderboardController(dispatcher, apiModule) {\n    _classCallCheck(this, LeaderboardController);\n\n    this._dispatcher = dispatcher;\n  }\n  /**\n   * Gets data to diplay specific leaderboard page\n   * @param {Number} page - number of page to get data for\n   */\n\n\n  _createClass(LeaderboardController, [{\n    key: \"getLeaderboard\",\n    value: function getLeaderboard(page) {\n      var _this = this;\n\n      _api_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getUsers(page).then(function (object) {\n        _this._dispatcher.dispatchEvent('LeaderboardLoaded', {\n          users: object.users,\n          pageCount: Math.ceil(object.count / 10),\n          currentPage: page - 1\n        });\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  }]);\n\n  return LeaderboardController;\n}();\n/**\n * Class implementing login logic\n */\n\n\nvar LoginController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * LoginController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function LoginController(dispatcher, apiModule, validator, UserModel) {\n    _classCallCheck(this, LoginController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._validator = validator;\n    this._UserModel = UserModel;\n  }\n  /**\n   * Tries to user in using passed data\n   * @param {String} login - user login\n   * @param {String} password - user password\n   */\n\n\n  _createClass(LoginController, [{\n    key: \"login\",\n    value: function login(_login, password) {\n      var _this2 = this;\n\n      var errorStruct = this._validator.validateLogin(_login, password);\n\n      console.log(errorStruct);\n\n      if (errorStruct.error !== null) {\n        this._dispatcher.dispatchEvent('LoggedIn', errorStruct);\n\n        return;\n      }\n\n      this._apiModule.authorize(_login, password).then(function (object) {\n        var image = object.avatar || '';\n\n        _this2._dispatcher.dispatchEvent('User', new _this2._UserModel(object.email, object.login, object.score, image));\n\n        _this2._dispatcher.dispatchEvent('LoggedIn', 'success');\n      })[\"catch\"](function (error) {\n        if (typeof error === 'string') {\n          console.log(error);\n        } else {\n          error = error.payload;\n          errorStruct.error = error.message;\n          errorStruct.errorField = error.field;\n\n          _this2._dispatcher.dispatchEvent('LoggedIn', errorStruct);\n        }\n      });\n    }\n  }]);\n\n  return LoginController;\n}();\n/**\n * Class implementing method to get current user\n */\n\n\nvar UserController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * UserController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function UserController(dispatcher, apiModule, UserModel) {\n    _classCallCheck(this, UserController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._UserModel = UserModel;\n  }\n  /**\n   * Gets current user\n   */\n\n\n  _createClass(UserController, [{\n    key: \"getUser\",\n    value: function getUser() {\n      var _this3 = this;\n\n      var state = this._dispatcher.getState();\n\n      if (state['User']) {\n        if (!state['User'].img) {\n          var us = state['User'];\n          var newUser = new this._UserModel(us.email, us.login, us.score, 'public/img/avatar.jpg');\n\n          this._dispatcher.dispatchEvent('User', newUser);\n        }\n\n        this._dispatcher.dispatchEvent('UserLoaded', state['User']);\n\n        return;\n      } else if (state['User'] === null) {\n        this._dispatcher.dispatchEvent('UserLoaded', null);\n\n        return;\n      }\n\n      this._apiModule.getUserInfo().then(function (object) {\n        var image = object.avatar || 'public/img/avatar.jpg';\n\n        _this3._dispatcher.dispatchEvent('User', new _this3._UserModel(object.email, object.login, object.score, image));\n\n        _this3._dispatcher.dispatchEvent('UserLoaded', state['User']);\n      })[\"catch\"](function (error) {\n        console.log(error);\n\n        _this3._dispatcher.dispatchEvent('User', null);\n\n        _this3._dispatcher.dispatchEvent('UserLoaded', null);\n      });\n    }\n  }]);\n\n  return UserController;\n}();\n/**\n * Class implementing signup logic\n */\n\n\nvar SignUpController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * SignUpController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function SignUpController(dispatcher, apiModule, validator, UserModel) {\n    _classCallCheck(this, SignUpController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._validator = validator;\n    this._UserModel = UserModel;\n  }\n  /**\n   * Tries to sign user up using passed data\n   * @param {String} login - user login\n   * @param {String} email - user email\n   * @param {String} password - user password\n   * @param {String} repassword - password confirmation\n   */\n\n\n  _createClass(SignUpController, [{\n    key: \"signUp\",\n    value: function signUp(login, email, password, repassword) {\n      var _this4 = this;\n\n      var errorStruct = this._validator.validateRegistration(login, password, email, repassword);\n\n      if (errorStruct.error !== null) {\n        this._dispatcher.dispatchEvent('SignedUp', errorStruct);\n\n        return;\n      }\n\n      this._apiModule.register(login, email, password).then(function (object) {\n        _this4._dispatcher.dispatchEvent('User', new _this4._UserModel(object.email, object.login, object.score));\n\n        _this4._dispatcher.dispatchEvent('SignedUp', 'success');\n      })[\"catch\"](function (error) {\n        if (typeof error === 'string') {\n          console.log(error);\n        } else {\n          error = error.payload;\n          errorStruct.error = error.message;\n          errorStruct.errorField = error.field;\n\n          _this4._dispatcher.dispatchEvent('SignedUp', errorStruct);\n        }\n      });\n    }\n  }]);\n\n  return SignUpController;\n}();\n/**\n * Class implementing logout logic\n */\n\n\nvar LogoutController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * LogoutController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function LogoutController(dispatcher, apiModule, UserModel) {\n    _classCallCheck(this, LogoutController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._UserModel = UserModel;\n  }\n  /**\n   * Logs user out\n   */\n\n\n  _createClass(LogoutController, [{\n    key: \"logout\",\n    value: function logout() {\n      var _this5 = this;\n\n      this._apiModule.logout().then(function () {\n        _this5._dispatcher.dispatchEvent('User', null);\n\n        _this5._dispatcher.dispatchEvent('LoggedOut', 'success');\n      })[\"catch\"](function (error) {\n        console.log(error);\n\n        _this5._dispatcher.dispatchEvent('LoggedOut', error);\n      });\n    }\n  }]);\n\n  return LogoutController;\n}();\n/**\n * Class implementing settings logic\n */\n\n\nvar SettingsController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * SettingsController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function SettingsController(dispatcher, apiModule, validator, UserModel) {\n    _classCallCheck(this, SettingsController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._validator = validator;\n    this._UserModel = UserModel;\n  }\n  /**\n   * Tries to update user frofile using passed data\n   * @param {String} login - user login\n   * @param {String} password - user password\n   * @param {String} repassword - password confirmation\n   * @param {Object} input - image form input\n   */\n\n\n  _createClass(SettingsController, [{\n    key: \"updateProfile\",\n    value: function updateProfile(login, password, repassword, input) {\n      var _this6 = this;\n\n      var errorStruct = this._validator.validateUpdate(login, password, repassword);\n\n      if (errorStruct.error !== null) {\n        this._dispatcher.dispatchEvent('ProfileUpdated', errorStruct);\n\n        return;\n      }\n\n      this._apiModule.updateUserInfo(login, password).then(function (object) {\n        var image = object.avatar || null;\n\n        _this6._dispatcher.dispatchEvent('User', new _this6._UserModel(object.email, object.login, object.score, image));\n\n        _this6._dispatcher.dispatchEvent('ProfileUpdated', 'success');\n      })[\"catch\"](function (error) {\n        if (typeof error === 'string') {\n          console.log(error);\n        } else {\n          error = error.payload;\n          var _errorStruct = {\n            error: error.message,\n            errorField: error.field\n          };\n\n          _this6._dispatcher.dispatchEvent('ProfileUpdated', _errorStruct);\n        }\n      });\n\n      if (input.value) {\n        var avatar = new FormData();\n        avatar.append('avatar', input.files[0]);\n\n        this._apiModule.uploadAvatar(avatar).then(function (object) {\n          var image = object.avatar || null;\n\n          _this6._dispatcher.dispatchEvent('User', new _this6._UserModel(object.email, object.login, object.score, image));\n\n          _this6._dispatcher.dispatchEvent('AvatarUpdated', 'success');\n        })[\"catch\"](function (error) {\n          if (typeof error === 'string') {\n            console.log(error);\n          } else {\n            error = error.payload;\n            var _errorStruct2 = {\n              error: error.message,\n              errorField: error.field\n            };\n\n            _this6._dispatcher.dispatchEvent('AvatarUpdated', _errorStruct2);\n          }\n        });\n      }\n    }\n  }]);\n\n  return SettingsController;\n}();\n\nvar ChatController =\n/*#__PURE__*/\nfunction () {\n  /**\n   * SettingsController constructor\n   * @param {DispatchAdapter} dispatcher - internal dispatcher\n   */\n  function ChatController(dispatcher, apiModule) {\n    var _this7 = this;\n\n    _classCallCheck(this, ChatController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._socket = new WebSocket('wss://chat.kpacubo.xyz:2000/ws');\n\n    this._socket.onopen = function () {\n      console.log('Соединение установлено.');\n    };\n\n    this._socket.onclose = function (event) {\n      if (event.wasClean) {\n        console.log('Соединение закрыто чисто');\n      } else {\n        console.log('Обрыв соединения'); // например, \"убит\" процесс сервера\n      }\n\n      console.log('Код: ' + event.code + ' причина: ' + event.reason);\n    };\n\n    this._socket.onmessage = function (event) {\n      var msg = JSON.parse(event.data);\n\n      if (msg.uid !== '') {\n        _this7._apiModule.getUserById(msg.uid).then(function (payload) {\n          _this7._dispatcher.dispatchEvent('Msg', {\n            text: payload.login + ':' + msg.text,\n            avatar: payload.avatar || 'public/img/avatar.jpg'\n          });\n        });\n      } else {\n        _this7._dispatcher.dispatchEvent('Msg', {\n          text: 'anon' + ':' + msg.text,\n          avatar: 'public/img/avatar.jpg'\n        });\n      }\n    };\n\n    this._socket.onerror = function (error) {\n      console.log('Ошибка ' + error.message);\n    };\n  }\n\n  _createClass(ChatController, [{\n    key: \"sendMsg\",\n    value: function sendMsg(msg) {\n      this._socket.send(JSON.stringify({\n        text: msg\n      }));\n    }\n  }, {\n    key: \"loadHistory\",\n    value: function loadHistory() {\n      var _this8 = this;\n\n      this._apiModule.getChatHistory().then(function (payload) {\n        payload = payload.reverse();\n\n        _this8._dispatcher.dispatchEvent('Msgs', payload);\n\n        console.log(payload);\n      })[\"catch\"](function (govno) {\n        console.log(govno);\n      });\n    }\n  }]);\n\n  return ChatController;\n}();\n\nvar controllerFactory = new _factory_js__WEBPACK_IMPORTED_MODULE_4__[\"default\"]({\n  'apiModule': _api_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"],\n  'validator': _basevalidator_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"],\n  'UserModel': _models_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"],\n  'dispatcher': _dispatcher_js__WEBPACK_IMPORTED_MODULE_0__[\"dispatchAdapter\"]\n});\ncontrollerFactory.addConstructor(LeaderboardController, ['dispatcher', 'apiModule']);\ncontrollerFactory.addConstructor(LoginController, ['dispatcher', 'apiModule', 'validator', 'UserModel']);\ncontrollerFactory.addConstructor(UserController, ['dispatcher', 'apiModule', 'UserModel']);\ncontrollerFactory.addConstructor(SignUpController, ['dispatcher', 'apiModule', 'validator', 'UserModel']);\ncontrollerFactory.addConstructor(LogoutController, ['dispatcher', 'apiModule', 'UserModel']);\ncontrollerFactory.addConstructor(SettingsController, ['dispatcher', 'apiModule', 'validator', 'UserModel']);\ncontrollerFactory.addConstructor(_gamecontrollers_js__WEBPACK_IMPORTED_MODULE_5__[\"SinglePlayerController\"], ['dispatcher', 'apiModule', 'UserModel']);\ncontrollerFactory.addConstructor(ChatController, ['dispatcher', 'apiModule']);\nvar leaderboardController = controllerFactory.getFabricator(LeaderboardController)();\nvar loginController = controllerFactory.getFabricator(LoginController)();\nvar userController = controllerFactory.getFabricator(UserController)();\nvar signUpController = controllerFactory.getFabricator(SignUpController)();\nvar logoutController = controllerFactory.getFabricator(LogoutController)();\nvar settingsController = controllerFactory.getFabricator(SettingsController)();\nvar singlePlayerController = controllerFactory.getFabricator(_gamecontrollers_js__WEBPACK_IMPORTED_MODULE_5__[\"SinglePlayerController\"])();\nvar chatController = controllerFactory.getFabricator(ChatController)();\n\n\n//# sourceURL=webpack:///./public/modules/controllers.js?");

/***/ }),

/***/ "./public/modules/dispatcher.js":
/*!**************************************!*\
  !*** ./public/modules/dispatcher.js ***!
  \**************************************/
/*! exports provided: subscribeAdapter, dispatchAdapter */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"subscribeAdapter\", function() { return subscribeAdapter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"dispatchAdapter\", function() { return dispatchAdapter; });\n\n/**\n * State holder capable of dispatching events\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Dispatcher =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Dispatcher constructor\n   */\n  function Dispatcher() {\n    _classCallCheck(this, Dispatcher);\n\n    this._state = {};\n    this._subscribers = {};\n  }\n  /**\n   * Returns dispatcher's state copy\n   * @return {Object} - state\n   */\n\n\n  _createClass(Dispatcher, [{\n    key: \"getState\",\n    value: function getState() {\n      // TODO: make deep copy w/ methods n shiet\n      // return JSON.parse(JSON.stringify(this._state));\n      return this._state;\n    }\n    /**\n     * Subscribes callback to a specific event type\n     * @param {String} key - event type\n     * @param {Function} callback - callback to be subscribed\n     */\n\n  }, {\n    key: \"subscribeEvent\",\n    value: function subscribeEvent(key, callback) {\n      if (typeof key !== 'string') {\n        throw new TypeError('key expected to be string');\n      }\n\n      if (typeof callback !== 'function') {\n        throw new TypeError('callback expected to be a function');\n      }\n\n      if (this._subscribers[key] === undefined) {\n        this._subscribers[key] = [];\n      }\n\n      this._subscribers[key].push(callback);\n    }\n    /**\n     * Unsubscribes callback from a specific event type\n     * @param {String} key - event type\n     * @param {Function} callback - callback to be unsubscribed\n     */\n\n  }, {\n    key: \"unsubscribeEvent\",\n    value: function unsubscribeEvent(key, callback) {\n      if (typeof key !== 'string') {\n        throw new TypeError('key expected to be string');\n      }\n\n      if (typeof callback !== 'function') {\n        throw new TypeError('callback expected to be a function');\n      }\n\n      if (this._subscribers[key] === undefined) {\n        return;\n      }\n\n      var index = this._subscribers[key].indexOf(callback);\n\n      if (index === -1) {\n        return;\n      }\n\n      this._subscribers[key].splice(index, 1);\n    }\n    /**\n     * Dispatches new event that modifies internal state\n     * @param {String} key - event type\n     * @param {*} value - event data\n     */\n\n  }, {\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(key, value) {\n      if (typeof key !== 'string') {\n        throw new TypeError('key expected to be string');\n      }\n\n      this._state[key] = value;\n\n      if (this._subscribers[key]) {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this._subscribers[key][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var cb = _step.value;\n            cb(this.getState(), key, value);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n    }\n  }]);\n\n  return Dispatcher;\n}();\n/**\n * Dispatcher adapter allowing to dispatch events\n */\n\n\nvar DispatchAdapter =\n/*#__PURE__*/\nfunction () {\n  /**\n   * DispatchAdapter constructor\n   * @param {Dispatcher} dispatcher - dispatcher to be adapted\n   */\n  function DispatchAdapter(dispatcher) {\n    _classCallCheck(this, DispatchAdapter);\n\n    if (!dispatcher instanceof Dispatcher) {\n      throw new TypeError('instance of Dispatcher expected');\n    }\n\n    this._dispatcher = dispatcher;\n  }\n  /**\n   * See Dispatcher.dispatchEvent()\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(DispatchAdapter, [{\n    key: \"dispatchEvent\",\n    value: function dispatchEvent(key, value) {\n      this._dispatcher.dispatchEvent(key, value);\n    }\n    /**\n     * See Dispatcher.getState()\n     * @return {Object} - state\n     */\n\n  }, {\n    key: \"getState\",\n    value: function getState() {\n      return this._dispatcher.getState();\n    }\n  }]);\n\n  return DispatchAdapter;\n}();\n/**\n * Dispatcher adapter allowing to (un)subscribe (from)to events\n */\n\n\nvar SubscribeAdapter =\n/*#__PURE__*/\nfunction () {\n  /**\n   * SubscribeAdapter constructor\n   * @param {Dispatcher} dispatcher - dispatcher to be adapted\n   */\n  function SubscribeAdapter(dispatcher) {\n    _classCallCheck(this, SubscribeAdapter);\n\n    if (!dispatcher instanceof Dispatcher) {\n      throw new TypeError('instance of Dispatcher expected');\n    }\n\n    this._dispatcher = dispatcher;\n  }\n  /**\n   * See Dispatcher.subscribeEvent()\n   * @param {String} key - event type\n   * @param {Function} callback - callback to be subscribed\n   */\n\n\n  _createClass(SubscribeAdapter, [{\n    key: \"subscribeEvent\",\n    value: function subscribeEvent(key, callback) {\n      this._dispatcher.subscribeEvent(key, callback);\n    }\n    /**\n     * See Dispatcher.unsubscribeEvent()\n     * @param {String} key - event type\n     * @param {Function} callback - callback to be unsubscribed\n     */\n\n  }, {\n    key: \"unsubscribeEvent\",\n    value: function unsubscribeEvent(key, callback) {\n      this._dispatcher.unsubscribeEvent(key, callback);\n    }\n  }]);\n\n  return SubscribeAdapter;\n}();\n\nvar dispatcher = new Dispatcher();\nvar subscribeAdapter = new SubscribeAdapter(dispatcher);\nvar dispatchAdapter = new DispatchAdapter(dispatcher);\n\n\n//# sourceURL=webpack:///./public/modules/dispatcher.js?");

/***/ }),

/***/ "./public/modules/factory.js":
/*!***********************************!*\
  !*** ./public/modules/factory.js ***!
  \***********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n/**\n * Factory class implementing method to add new factory methods\n */\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Factory =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Factory constructor\n   * @param {Object} injections - injections to all\n   * new classes fabricted by concrete object\n   */\n  function Factory() {\n    var injections = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, Factory);\n\n    this._generalInjections = injections;\n    this._constructors = new Map();\n  }\n  /**\n   * Method to add new factory methods\n   * @param {Class} C - class to be fabricated by new method\n   * @param {Array} concInjections - injections to new instances of C class\n   */\n\n\n  _createClass(Factory, [{\n    key: \"addConstructor\",\n    value: function addConstructor(Constructor) {\n      var _this = this;\n\n      var constructorArgs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n      var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n          _ref$factoryArgs = _ref.factoryArgs,\n          factoryArgs = _ref$factoryArgs === void 0 ? [] : _ref$factoryArgs,\n          _ref$injections = _ref.injections,\n          injections = _ref$injections === void 0 ? {} : _ref$injections;\n\n      if (!Constructor) {\n        return;\n      }\n\n      this._constructors[Constructor] = function () {\n        for (var _len = arguments.length, receivedArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n          receivedArgs[_key] = arguments[_key];\n        }\n\n        var resolvedArgs = constructorArgs.map(function (name) {\n          var factoryArgsIndex = factoryArgs.indexOf(name);\n\n          if (factoryArgsIndex >= 0) {\n            return receivedArgs[factoryArgsIndex];\n          } else if (injections.hasOwnProperty(name)) {\n            return injections[name];\n          } else if (_this._generalInjections.hasOwnProperty(name)) {\n            return _this._generalInjections[name];\n          } else {\n            throw Error('no such attribute in received args or injections');\n          }\n        });\n        return _construct(Constructor, _toConsumableArray(resolvedArgs));\n      };\n    }\n  }, {\n    key: \"getFabricator\",\n    value: function getFabricator(Class) {\n      return this._constructors[Class];\n    }\n  }]);\n\n  return Factory;\n}();\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Factory);\n\n//# sourceURL=webpack:///./public/modules/factory.js?");

/***/ }),

/***/ "./public/modules/gamecontrollers.js":
/*!*******************************************!*\
  !*** ./public/modules/gamecontrollers.js ***!
  \*******************************************/
/*! exports provided: SinglePlayerController */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SinglePlayerController\", function() { return SinglePlayerController; });\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar SinglePlayerController =\n/*#__PURE__*/\nfunction () {\n  function SinglePlayerController(dispatcher, apiModule, UserModel) {\n    _classCallCheck(this, SinglePlayerController);\n\n    this._dispatcher = dispatcher;\n    this._apiModule = apiModule;\n    this._UserModel = UserModel;\n  }\n\n  _createClass(SinglePlayerController, [{\n    key: \"init\",\n    value: function init() {\n      var _this = this;\n\n      fetch('/public/gameresources/singleplayer.json').then(function (response) {\n        return response.text();\n      }).then(function (response) {\n        _this._pack = JSON.parse(response); // this._validatePack();\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this._pack.rounds[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var round = _step.value;\n            round.questionCount = round.themes[0].questions.length;\n            round.questionsLeft = round.questionCount * round.themes.length;\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n              for (var _iterator2 = round.themes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                var theme = _step2.value;\n                var _iteratorNormalCompletion3 = true;\n                var _didIteratorError3 = false;\n                var _iteratorError3 = undefined;\n\n                try {\n                  for (var _iterator3 = theme.questions[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var question = _step3.value;\n                    question.active = true;\n                  }\n                } catch (err) {\n                  _didIteratorError3 = true;\n                  _iteratorError3 = err;\n                } finally {\n                  try {\n                    if (!_iteratorNormalCompletion3 && _iterator3[\"return\"] != null) {\n                      _iterator3[\"return\"]();\n                    }\n                  } finally {\n                    if (_didIteratorError3) {\n                      throw _iteratorError3;\n                    }\n                  }\n                }\n              }\n            } catch (err) {\n              _didIteratorError2 = true;\n              _iteratorError2 = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion2 && _iterator2[\"return\"] != null) {\n                  _iterator2[\"return\"]();\n                }\n              } finally {\n                if (_didIteratorError2) {\n                  throw _iteratorError2;\n                }\n              }\n            }\n\n            console.log(round.questionCount);\n            console.log(round.questionsLeft);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        var state = _this._dispatcher.getState();\n\n        _this._user = [];\n\n        if (state['User']) {\n          _this._user.push(state['User']);\n\n          _this._user[0].score = 0;\n        } else {\n          var user = {\n            login: 'Guest',\n            img: '/public/img/avatar.jpg',\n            score: 0\n          };\n\n          _this._user.push(user);\n        }\n\n        _this._round = -1;\n\n        _this._changeRound();\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"_displayQuestions\",\n    value: function _displayQuestions() {\n      var users = this._user;\n      var obj = {\n        round: this._pack.rounds[this._round],\n        users: users\n      };\n\n      this._dispatcher.dispatchEvent('QuestionList', obj);\n    }\n  }, {\n    key: \"displayQuestion\",\n    value: function displayQuestion(tile) {\n      if (!tile instanceof Node) {\n        throw new TypeError('node expected');\n      }\n\n      var num = -1;\n      var parent = tile.parentElement;\n\n      for (var i in parent.childNodes) {\n        if (parent.childNodes.hasOwnProperty(i)) {\n          if (parent.childNodes[i] === tile) {\n            num = i;\n            break;\n          }\n        }\n      }\n\n      console.log(num);\n      var actualNum = Math.floor((num - 1) / 2);\n      console.log(actualNum);\n      var questionNum = actualNum % (this._pack.rounds[this._round].questionCount + 1) - 1;\n      var themeNum = Math.floor(actualNum / (this._pack.rounds[this._round].questionCount + 1));\n      console.log(questionNum);\n      console.log(themeNum);\n\n      if (questionNum !== -1) {\n        var question = this._pack.rounds[this._round].themes[themeNum].questions[questionNum];\n\n        if (question.active) {\n          this._theme = themeNum;\n          this._question = questionNum;\n          var users = this._user;\n\n          this._dispatcher.dispatchEvent('Question', {\n            question: question.question,\n            users: users\n          });\n        }\n      }\n    }\n  }, {\n    key: \"displayAnswer\",\n    value: function displayAnswer(answer) {\n      var _this2 = this;\n\n      var users = this._user;\n      var question = this._pack.rounds[this._round].themes[this._theme].questions[this._question];\n      var isCorrect = false;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = question.answers[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var rightAnswer = _step4.value;\n\n          if (answer.toLowerCase() === rightAnswer.toLowerCase()) {\n            isCorrect = true;\n            break;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4[\"return\"] != null) {\n            _iterator4[\"return\"]();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      var result = '';\n\n      if (isCorrect) {\n        result = 'You are right!';\n        this._user[0].score += question.value;\n      } else {\n        result = 'Correct answer is: ' + question.answers[0];\n        this._user[0].score -= question.value;\n      }\n\n      question.active = false;\n      this._pack.rounds[this._round].questionsLeft--;\n      var handler = this._displayQuestions;\n\n      if (this._pack.rounds[this._round].questionsLeft === 0) {\n        handler = this._changeRound;\n      }\n\n      var obj = {\n        message: result,\n        users: users\n      };\n      setTimeout(function () {\n        handler.bind(_this2)();\n      }, 3000);\n\n      this._dispatcher.dispatchEvent('Message', obj);\n    }\n  }, {\n    key: \"_changeRound\",\n    value: function _changeRound() {\n      var _this3 = this;\n\n      this._round++;\n\n      if (this._round === this._pack.rounds.length) {\n        this._endGame();\n\n        return;\n      }\n\n      var obj = {\n        message: 'Round ' + (this._round + 1),\n        users: this._user\n      };\n      setTimeout(function () {\n        _this3._displayQuestions();\n      }, 3000);\n\n      this._dispatcher.dispatchEvent('Message', obj);\n    }\n  }, {\n    key: \"_endGame\",\n    value: function _endGame() {\n      var obj = {\n        message: 'Game ended! Your score: ' + this._user[0].score,\n        users: this._user\n      };\n\n      this._dispatcher.dispatchEvent('Message', obj);\n    }\n  }]);\n\n  return SinglePlayerController;\n}();\n\n//# sourceURL=webpack:///./public/modules/gamecontrollers.js?");

/***/ }),

/***/ "./public/modules/models.js":
/*!**********************************!*\
  !*** ./public/modules/models.js ***!
  \**********************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n/**\n * Class implementing user model\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar UserModel =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Default UserModel constructor\n   * @param {string} email - user email\n   * @param {string} login - user login\n   * @param {string} score - user score\n   * @param {string} img - user avatar path\n   */\n  function UserModel(email, login, score) {\n    var img = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : '';\n\n    _classCallCheck(this, UserModel);\n\n    this._email = email;\n    this._login = login;\n    this._img = img;\n    this._score = score;\n  }\n  /**\n   * Email getter\n   * @return {string} - email\n   */\n\n\n  _createClass(UserModel, [{\n    key: \"email\",\n    get: function get() {\n      return this._email;\n    }\n    /**\n     * Login getter\n     * @return {string} - login\n     */\n\n  }, {\n    key: \"login\",\n    get: function get() {\n      return this._login;\n    }\n    /**\n     * Img path getter\n     * @return {string} - img path\n     */\n\n  }, {\n    key: \"img\",\n    get: function get() {\n      return this._img;\n    }\n    /**\n     * Score getter\n     * @return {string} - score\n     */\n\n  }, {\n    key: \"score\",\n    get: function get() {\n      return this._score;\n    },\n    set: function set(score) {\n      this._score = score;\n    }\n  }]);\n\n  return UserModel;\n}(); // TODO(AntonyMoes): implement UserModel holder\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (UserModel);\n\n//# sourceURL=webpack:///./public/modules/models.js?");

/***/ }),

/***/ "./public/modules/router.js":
/*!**********************************!*\
  !*** ./public/modules/router.js ***!
  \**********************************/
/*! exports provided: Router, initAnchorsRouting */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Router\", function() { return Router; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"initAnchorsRouting\", function() { return initAnchorsRouting; });\n\n/**\n * Class used to manage views (routes) switching\n */\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar Router =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Router constructor\n   * @param {Node} rootEl - DOM element\n   */\n  function Router(rootEl) {\n    _classCallCheck(this, Router);\n\n    if (!(rootEl instanceof Node)) {\n      throw new TypeError('rootEl must be Node');\n    }\n\n    this._rootEl = rootEl;\n    this._routeMakerFns = {};\n    this._defaultRoutePath = null;\n    this._currentRoute = null;\n    this.notFoundRouteMaker = null;\n  }\n  /**\n   * Adds route to the router\n   * @param {String} path - url\n   * @param {Function} routeMakerFn - function returning new Route object\n   */\n\n\n  _createClass(Router, [{\n    key: \"addRoute\",\n    value: function addRoute(path, routeMakerFn) {\n      if (typeof path !== 'string') {\n        return;\n      }\n\n      if (typeof routeMakerFn !== 'function') {\n        return;\n      }\n\n      this._routeMakerFns[path] = routeMakerFn;\n    }\n    /**\n     * Sets default route\n     * @param {String} path - url\n     */\n\n  }, {\n    key: \"setDefaultRoute\",\n    value: function setDefaultRoute(path) {\n      if (typeof path !== 'string') {\n        return;\n      }\n\n      this._defaultRoutePath = path;\n    }\n    /**\n     * Initializes the router\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.routeTo(this._defaultRoutePath, false);\n    }\n    /**\n     * Redirects and renders required page\n     * @param {String} path - url\n     */\n\n  }, {\n    key: \"routeTo\",\n    value: function routeTo(path) {\n      var shouldBePushed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (typeof path !== 'string') {\n        return;\n      }\n\n      if (shouldBePushed) {\n        console.log('Pushing', path); // TODO: maybe we shouldn't push logout?\n\n        history.pushState(null, null, path);\n      } else {\n        console.log('Poping', path);\n      }\n\n      if (this._currentRoute) {\n        if (this._currentRoute.deinit) {\n          this._currentRoute.deinit();\n        }\n\n        this._currentRoute = null;\n      }\n\n      var routeMakerFn = this._routeMakerFns[path];\n\n      if (!routeMakerFn) {\n        console.log('OI MATE');\n        routeMakerFn = this.notFoundRouteMaker;\n      }\n\n      var route = routeMakerFn(this._rootEl, this);\n\n      if (!route) {\n        return;\n      }\n\n      this._currentRoute = route;\n\n      if (route.init) {\n        route.init();\n      }\n    }\n  }]);\n\n  return Router;\n}();\n/**\n * Anchors routes on link by event listeners\n * @param {Node} rootEl - DOM element\n * @param {Function} router - route object\n */\n\n\nfunction initAnchorsRouting(rootEl, router) {\n  if (!(rootEl instanceof Node)) {\n    return;\n  }\n\n  if (!(router instanceof Router)) {\n    return;\n  }\n\n  rootEl.addEventListener('click', function (ev) {\n    if (!(ev.target instanceof HTMLAnchorElement)) {\n      return;\n    }\n\n    ev.preventDefault();\n    var path = ev.target.getAttribute('href');\n    router.routeTo(path);\n    console.log(\"<a> go to \".concat(path));\n  });\n  window.addEventListener('popstate', function (e) {\n    console.log(location.pathname);\n    router.routeTo(location.pathname, false);\n  }, false);\n}\n\nHandlebars.registerHelper('pagination', function (currentPage, totalPage, size, options) {\n  var startPage;\n  var endPage;\n\n  if (arguments.length === 3) {\n    options = size;\n    size = 5;\n  }\n\n  startPage = currentPage - Math.floor(size / 2);\n  endPage = currentPage + Math.floor(size / 2);\n\n  if (startPage <= 0) {\n    endPage -= startPage - 1;\n    startPage = 1;\n  }\n\n  if (endPage > totalPage) {\n    endPage = totalPage;\n\n    if (endPage - size + 1 > 0) {\n      startPage = endPage - size + 1;\n    } else {\n      startPage = 1;\n    }\n  }\n\n  var context = {\n    startFromFirstPage: false,\n    pages: [],\n    endAtLastPage: false\n  };\n\n  if (startPage === 1) {\n    context.startFromFirstPage = true;\n  }\n\n  for (var i = startPage; i <= endPage; i++) {\n    context.pages.push({\n      page: i,\n      isCurrent: i === currentPage\n    });\n  }\n\n  if (endPage === totalPage) {\n    context.endAtLastPage = true;\n  }\n\n  return options.fn(context);\n});\n\n\n//# sourceURL=webpack:///./public/modules/router.js?");

/***/ }),

/***/ "./public/modules/routes.js":
/*!**********************************!*\
  !*** ./public/modules/routes.js ***!
  \**********************************/
/*! exports provided: IndexRoute, LoginRoute, LeaderBoardRoute, SignUpRoute, ProfileRoute, SettingsRoute, AboutRoute, LogoutRoute, SinglePlayerRoute, NotFoundRoute, ChatRoute */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IndexRoute\", function() { return IndexRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LoginRoute\", function() { return LoginRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LeaderBoardRoute\", function() { return LeaderBoardRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SignUpRoute\", function() { return SignUpRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ProfileRoute\", function() { return ProfileRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SettingsRoute\", function() { return SettingsRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"AboutRoute\", function() { return AboutRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"LogoutRoute\", function() { return LogoutRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"SinglePlayerRoute\", function() { return SinglePlayerRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"NotFoundRoute\", function() { return NotFoundRoute; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ChatRoute\", function() { return ChatRoute; });\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils.js */ \"./public/modules/utils.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./router.js */ \"./public/modules/router.js\");\n\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n // import {sendMsg} from './chatws.js'\n\n/**\n * Base view class\n */\n\nvar BaseRoute =\n/*#__PURE__*/\nfunction () {\n  /**\n   * BaseRoute constructor\n   * @param {Node} rootEl - DOM element\n   * @param {Router} router - route object\n   * @param {Object} controller - business logic implementer\n   * @param {SubscribeAdapter} subscriber - adapter allowint event subscription\n   */\n  function BaseRoute(rootEl, router) {\n    var controller = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var subscriber = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    _classCallCheck(this, BaseRoute);\n\n    if (!(rootEl instanceof Node)) {\n      throw new TypeError('rootEl must be Node');\n    }\n\n    if (!(router instanceof _router_js__WEBPACK_IMPORTED_MODULE_1__[\"Router\"])) {\n      throw new TypeError('router must be Router');\n    }\n\n    this._rootEl = rootEl;\n    this._router = router;\n    this._controller = controller;\n    this._subscriber = subscriber;\n    this._eventHandlers = {};\n\n    if (this.render) {\n      this._render = this.render.bind(this);\n    }\n  }\n  /**\n   * Adds listener of specific event\n   * @param {Event} event - DOM event\n   * @param {Function} handler - handler, duh\n   */\n\n\n  _createClass(BaseRoute, [{\n    key: \"_addListener\",\n    value: function _addListener(event, handler) {\n      if (!(event in this._eventHandlers)) {\n        this._eventHandlers[event] = [];\n      }\n\n      this._eventHandlers[event].push(handler);\n\n      this._rootEl.addEventListener(event, handler);\n    }\n    /**\n     * Remove listeners of specific event\n     * @param {Event} event - event to remove\n     */\n\n  }, {\n    key: \"_removeAllListeners\",\n    value: function _removeAllListeners(event) {\n      if (event in this._eventHandlers) {\n        var eventHandlers = this._eventHandlers[event];\n\n        for (var i = eventHandlers.length; i--;) {\n          var handler = eventHandlers[i];\n\n          this._rootEl.removeEventListener(event, handler);\n        }\n      }\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {}\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._rootEl.innerHTML = '';\n\n      for (event in this._eventHandlers) {\n        if (this._eventHandlers.hasOwnProperty(event)) {\n          this._removeAllListeners(event);\n        }\n      }\n    }\n  }]);\n\n  return BaseRoute;\n}();\n/**\n * BaseRoute extension for index.html render\n */\n\n\nvar IndexRoute =\n/*#__PURE__*/\nfunction (_BaseRoute) {\n  _inherits(IndexRoute, _BaseRoute);\n\n  /**\n   * IndexRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function IndexRoute() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, IndexRoute);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(IndexRoute)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this._loginController = args[4];\n    _this._signupController = args[5];\n    return _this;\n  }\n  /**\n   * initializer\n   */\n  // prerender() {\n  //   this._rootEl.innerHTML = Handlebars.templates['menu.html']({\n  //     isAuthorized: null,\n  //   });\n  // }\n\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(IndexRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (state['User']) {\n        this._rootEl.innerHTML = Handlebars.templates['menu.html']({\n          isAuthorized: true\n        });\n      } else if (!value) {\n        this._rootEl.innerHTML = Handlebars.templates['menu.html']({\n          isAuthorized: null\n        });\n      } // showErrorMsg(this._form, value.errorField, value.error);\n\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this2 = this;\n\n      // this.prerender();\n      var openTab = function openTab(evt) {\n        evt.preventDefault();\n        var btn = document.getElementById(\"myBtn\");\n        var modal = document.getElementById('myModal');\n\n        if (evt.target == modal) {\n          modal.style.display = \"none\";\n          return;\n        }\n\n        if (evt.target == btn) {\n          modal.style.display = \"block\";\n          document.getElementById(\"defaultOpen\").click();\n          return;\n        }\n\n        if (evt.target.name == 'submit') {\n          var _evt = new CustomEvent('submit');\n\n          _evt.initCustomEvent('submit', true, true);\n\n          document.forms['loginform'].dispatchEvent(_evt);\n          return;\n        }\n\n        var i, tabcontent, tablinks;\n        tabcontent = document.getElementsByClassName('tabcontent');\n        tablinks = document.getElementsByClassName('tablinks');\n\n        if (Array.prototype.slice.call(tablinks).includes(evt.target)) {\n          for (i = 0; i < tabcontent.length; i++) {\n            tabcontent[i].style.display = 'none';\n          }\n\n          tablinks = document.getElementsByClassName('tablinks');\n\n          for (i = 0; i < tablinks.length; i++) {\n            tablinks[i].className = tablinks[i].className.replace(' active', '');\n          }\n\n          document.getElementById(evt.target.innerText).style.display = 'block';\n          evt.currentTarget.className += ' active';\n        }\n      };\n\n      this._addListener('submit', function (event) {\n        event.preventDefault();\n        _this2._form = event.target;\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"clearErrors\"])(_this2._form);\n        var login = _this2._form.elements['login'].value;\n        var password = _this2._form.elements['password'].value;\n\n        _this2._loginController.login(login, password);\n      });\n\n      this._subscriber.subscribeEvent('LoggedIn', this._render);\n\n      this._addListener('click', openTab);\n\n      this._subscriber.subscribeEvent('UserLoaded', this._render);\n\n      this._controller.getUser();\n\n      _get(_getPrototypeOf(IndexRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * deinitializer\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('UserLoaded', this._render);\n\n      this._rootEl.innerHTML = '';\n\n      _get(_getPrototypeOf(IndexRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return IndexRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for login.html render\n */\n\n\nvar LoginRoute =\n/*#__PURE__*/\nfunction (_BaseRoute2) {\n  _inherits(LoginRoute, _BaseRoute2);\n\n  /**\n   * LoginRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function LoginRoute() {\n    var _getPrototypeOf3;\n\n    _classCallCheck(this, LoginRoute);\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf3 = _getPrototypeOf(LoginRoute)).call.apply(_getPrototypeOf3, [this].concat(args)));\n  }\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(LoginRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (value === 'success') {\n        this._router.routeTo('/');\n\n        return;\n      }\n\n      Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"showErrorMsg\"])(this._form, value.errorField, value.error);\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      this._rootEl.innerHTML = Handlebars.templates['login.html']();\n\n      this._addListener('submit', function (event) {\n        event.preventDefault();\n        _this3._form = event.target;\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"clearErrors\"])(_this3._form);\n        var login = _this3._form.elements['login'].value;\n        var password = _this3._form.elements['password'].value;\n\n        _this3._controller.login(login, password);\n      });\n\n      this._subscriber.subscribeEvent('LoggedIn', this._render);\n\n      _get(_getPrototypeOf(LoginRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('LoggedIn', this._render);\n\n      _get(_getPrototypeOf(LoginRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return LoginRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for settings.html render\n */\n\n\nvar SettingsRoute =\n/*#__PURE__*/\nfunction (_BaseRoute3) {\n  _inherits(SettingsRoute, _BaseRoute3);\n\n  /**\n   * SettingsRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function SettingsRoute() {\n    var _getPrototypeOf4;\n\n    _classCallCheck(this, SettingsRoute);\n\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf4 = _getPrototypeOf(SettingsRoute)).call.apply(_getPrototypeOf4, [this].concat(args)));\n  }\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(SettingsRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (value !== 'success') {\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"showErrorMsg\"])(this._form, value.errorField, value.error);\n        return;\n      }\n\n      if (key === 'ProfileUpdated') {\n        this._waitingAvatarUpdate = false;\n      }\n\n      if (key === 'AvatarUpdated') {\n        this._waitingAvatarUpdate = false;\n      }\n\n      if (this._waitingProfileUpdate && this._waitingAvatarUpdate) {\n        return;\n      }\n\n      this._router.routeTo('/');\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this4 = this;\n\n      this._rootEl.innerHTML = Handlebars.templates['settings.html']();\n\n      this._addListener('submit', function (event) {\n        event.preventDefault();\n        _this4._form = event.target;\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"clearErrors\"])(_this4._form);\n        var login = _this4._form.elements['login'].value;\n        var password = _this4._form.elements['password'].value;\n        var repassword = _this4._form.elements['repeat_password'].value;\n        var input = _this4._form.elements['avatar'];\n\n        if (input.value) {\n          _this4._waitingAvatarUpdate = true;\n        }\n\n        _this4._controller.updateProfile(login, password, repassword, input);\n      });\n\n      this._waitingProfileUpdate = true;\n\n      this._subscriber.subscribeEvent('ProfileUpdated', this._render);\n\n      this._subscriber.subscribeEvent('AvatarUpdated', this._render);\n\n      _get(_getPrototypeOf(SettingsRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('ProfileUpdated', this._render);\n\n      this._subscriber.unsubscribeEvent('AvatarUpdated', this._render);\n\n      _get(_getPrototypeOf(SettingsRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return SettingsRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for profile.html render\n */\n\n\nvar ProfileRoute =\n/*#__PURE__*/\nfunction (_BaseRoute4) {\n  _inherits(ProfileRoute, _BaseRoute4);\n\n  /**\n   * ProfileRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function ProfileRoute() {\n    var _getPrototypeOf5;\n\n    _classCallCheck(this, ProfileRoute);\n\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf5 = _getPrototypeOf(ProfileRoute)).call.apply(_getPrototypeOf5, [this].concat(args)));\n  }\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(ProfileRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (value) {\n        /* TODO(everyone): make settings file */\n        var user = value;\n        this._rootEl.innerHTML = Handlebars.templates['profile.html']({\n          login: user.login,\n          email: user.email,\n          avatar_path: user.img,\n          score: user.score\n        });\n      } else {\n        this._router.routeTo('/');\n      }\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this._subscriber.subscribeEvent('UserLoaded', this._render);\n\n      this._controller.getUser();\n\n      _get(_getPrototypeOf(ProfileRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('UserLoaded', this._render);\n\n      _get(_getPrototypeOf(ProfileRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return ProfileRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for signup.html render\n */\n\n\nvar SignUpRoute =\n/*#__PURE__*/\nfunction (_BaseRoute5) {\n  _inherits(SignUpRoute, _BaseRoute5);\n\n  /**\n   * SignUpRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function SignUpRoute() {\n    var _getPrototypeOf6;\n\n    _classCallCheck(this, SignUpRoute);\n\n    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n      args[_key5] = arguments[_key5];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf6 = _getPrototypeOf(SignUpRoute)).call.apply(_getPrototypeOf6, [this].concat(args)));\n  }\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(SignUpRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (value === 'success') {\n        this._router.routeTo('/');\n\n        return;\n      }\n\n      Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"showErrorMsg\"])(this._form, value.errorField, value.error);\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this5 = this;\n\n      this._rootEl.innerHTML = Handlebars.templates['signup.html']();\n\n      this._addListener('submit', function (event) {\n        event.preventDefault();\n        _this5._form = event.target;\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"clearErrors\"])(_this5._form);\n        var login = _this5._form.elements['login'].value;\n        var email = _this5._form.elements['email'].value;\n        var password = _this5._form.elements['password'].value;\n        var repassword = _this5._form.elements['repeat_password'].value;\n\n        _this5._controller.signUp(login, email, password, repassword);\n      });\n\n      this._subscriber.subscribeEvent('SignedUp', this._render);\n\n      _get(_getPrototypeOf(SignUpRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('SignedUp', this._render);\n\n      _get(_getPrototypeOf(SignUpRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return SignUpRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for leaderboard.html render\n */\n\n\nvar LeaderBoardRoute =\n/*#__PURE__*/\nfunction (_BaseRoute6) {\n  _inherits(LeaderBoardRoute, _BaseRoute6);\n\n  /**\n   * LeaderBoardRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function LeaderBoardRoute() {\n    var _getPrototypeOf7;\n\n    _classCallCheck(this, LeaderBoardRoute);\n\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf7 = _getPrototypeOf(LeaderBoardRoute)).call.apply(_getPrototypeOf7, [this].concat(args)));\n  }\n  /**\n   * Initial route render\n   */\n\n\n  _createClass(LeaderBoardRoute, [{\n    key: \"prerender\",\n    value: function prerender() {\n      this.render({}, '', {\n        users: [],\n        pageCount: 0,\n        currentPage: 0\n      });\n    }\n    /**\n     * Renders route after receiving event\n     * @param {Object} state - passed global state\n     * @param {String} key - event type\n     * @param {*} value - event data\n     */\n\n  }, {\n    key: \"render\",\n    value: function render(state, key, value) {\n      var _this6 = this;\n\n      this._rootEl.innerHTML = Handlebars.templates['leaderboard.html']({\n        users: value.users,\n        pageCount: value.pageCount,\n        currentPage: value.currentPage,\n        size: '5'\n      });\n      var pagination = document.getElementById('pagination');\n      pagination.addEventListener('click', function (event) {\n        event.preventDefault();\n        var link = event.target;\n        var page = link.getAttribute('href');\n\n        _this6._controller.getLeaderboard(page);\n      });\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      this.prerender();\n\n      this._subscriber.subscribeEvent('LeaderboardLoaded', this._render);\n\n      this._controller.getLeaderboard(1);\n\n      _get(_getPrototypeOf(LeaderBoardRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('LeaderboardLoaded', this._render);\n\n      _get(_getPrototypeOf(LeaderBoardRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return LeaderBoardRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for about.html render\n */\n\n\nvar AboutRoute =\n/*#__PURE__*/\nfunction (_BaseRoute7) {\n  _inherits(AboutRoute, _BaseRoute7);\n\n  /**\n   * AboutRoute constructor\n   * @param {Node} rootEl - DOM element\n   * @param {Router} router - route object\n   */\n  function AboutRoute(rootEl, router) {\n    _classCallCheck(this, AboutRoute);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AboutRoute).call(this, rootEl, router));\n  }\n  /**\n   * Inits route\n   */\n\n\n  _createClass(AboutRoute, [{\n    key: \"init\",\n    value: function init() {\n      this._rootEl.innerHTML = Handlebars.templates['about.html']();\n\n      _get(_getPrototypeOf(AboutRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      _get(_getPrototypeOf(AboutRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return AboutRoute;\n}(BaseRoute);\n/**\n * BaseRoute extension for logout pseudo-render\n */\n\n\nvar LogoutRoute =\n/*#__PURE__*/\nfunction (_BaseRoute8) {\n  _inherits(LogoutRoute, _BaseRoute8);\n\n  /**\n   * LogoutRoute constructor\n   * @param {Array} args - argumets to pass to BaseRoute constructor\n   */\n  function LogoutRoute() {\n    var _getPrototypeOf8;\n\n    _classCallCheck(this, LogoutRoute);\n\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf8 = _getPrototypeOf(LogoutRoute)).call.apply(_getPrototypeOf8, [this].concat(args)));\n  }\n  /**\n   * Renders route after receiving event\n   * @param {Object} state - passed global state\n   * @param {String} key - event type\n   * @param {*} value - event data\n   */\n\n\n  _createClass(LogoutRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (value === 'success') {\n        this._router.routeTo('/');\n      }\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      // TODO: actually we can draw logged menu to exclude short glitch on logout\n      this._subscriber.subscribeEvent('LoggedOut', this._render);\n\n      this._controller.logout();\n\n      _get(_getPrototypeOf(LogoutRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('LoggedOut', this._render);\n\n      _get(_getPrototypeOf(LogoutRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return LogoutRoute;\n}(BaseRoute);\n\nvar SinglePlayerRoute =\n/*#__PURE__*/\nfunction (_BaseRoute9) {\n  _inherits(SinglePlayerRoute, _BaseRoute9);\n\n  /**\n   * AboutRoute constructor\n   * @param {Node} rootEl - DOM element\n   * @param {Router} router - route object\n   */\n  function SinglePlayerRoute(rootEl, router, controller, subscriber) {\n    _classCallCheck(this, SinglePlayerRoute);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SinglePlayerRoute).call(this, rootEl, router, controller, subscriber));\n  }\n\n  _createClass(SinglePlayerRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      var context = {};\n\n      if (key === 'QuestionList') {\n        var round = value.round;\n        var users = value.users;\n        context = {\n          num: round.questionCount + 1,\n          themes: round.themes,\n          users: users,\n          isQuestionList: true\n        };\n      } else if (key === 'Question') {\n        context = {\n          users: value.users,\n          question: value.question,\n          isQuestion: true,\n          num: 1\n        };\n      } else if (key === 'Message') {\n        context = {\n          users: value.users,\n          message: value.message,\n          isMessage: true,\n          num: 1\n        };\n      }\n\n      this._rootEl.innerHTML = Handlebars.templates['svoyak.html'](context);\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this7 = this;\n\n      this._controller.init();\n\n      this._addListener('click', function (event) {\n        var questionEl = document.getElementById('questions');\n\n        if (!questionEl) {\n          return;\n        }\n\n        var tile = event.target;\n\n        if (!questionEl.isSameNode(tile.parentElement)) {\n          tile = tile.parentElement;\n\n          if (!questionEl.isSameNode(tile.parentElement)) {\n            return;\n          }\n        }\n\n        event.preventDefault();\n\n        _this7._controller.displayQuestion(tile);\n      });\n\n      this._addListener('submit', function (event) {\n        event.preventDefault();\n        _this7._form = event.target;\n        Object(_utils_js__WEBPACK_IMPORTED_MODULE_0__[\"clearErrors\"])(_this7._form);\n        var answer = _this7._form.elements['answer'].value;\n\n        _this7._controller.displayAnswer(answer);\n      });\n\n      this._subscriber.subscribeEvent('QuestionList', this._render);\n\n      this._subscriber.subscribeEvent('Question', this._render);\n\n      this._subscriber.subscribeEvent('Message', this._render);\n\n      _get(_getPrototypeOf(SinglePlayerRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      _get(_getPrototypeOf(SinglePlayerRoute.prototype), \"deinit\", this).call(this);\n\n      this._subscriber.unsubscribeEvent('QuestionList', this._render);\n\n      this._subscriber.unsubscribeEvent('Question', this._render);\n\n      this._subscriber.unsubscribeEvent('Message', this._render);\n    }\n  }]);\n\n  return SinglePlayerRoute;\n}(BaseRoute);\n\nvar NotFoundRoute =\n/*#__PURE__*/\nfunction (_BaseRoute10) {\n  _inherits(NotFoundRoute, _BaseRoute10);\n\n  function NotFoundRoute(rootEl, router) {\n    _classCallCheck(this, NotFoundRoute);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(NotFoundRoute).call(this, rootEl, router));\n  }\n\n  _createClass(NotFoundRoute, [{\n    key: \"init\",\n    value: function init() {\n      this._rootEl.innerHTML = Handlebars.templates['404.html']();\n\n      _get(_getPrototypeOf(NotFoundRoute.prototype), \"init\", this).call(this);\n    }\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      _get(_getPrototypeOf(NotFoundRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return NotFoundRoute;\n}(BaseRoute);\n\nvar ChatRoute =\n/*#__PURE__*/\nfunction (_BaseRoute11) {\n  _inherits(ChatRoute, _BaseRoute11);\n\n  /**\n   * AboutRoute constructor\n   * @param {Node} rootEl - DOM element\n   * @param {Router} router - route object\n   */\n  function ChatRoute() {\n    var _getPrototypeOf9;\n\n    _classCallCheck(this, ChatRoute);\n\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    return _possibleConstructorReturn(this, (_getPrototypeOf9 = _getPrototypeOf(ChatRoute)).call.apply(_getPrototypeOf9, [this].concat(args)));\n  }\n\n  _createClass(ChatRoute, [{\n    key: \"render\",\n    value: function render(state, key, value) {\n      if (key === 'Msg') {\n        var div = document.createElement('div');\n        var p = document.createElement('span');\n        var img = document.createElement('img');\n        img.src = value.avatar;\n        img.width = 25;\n        img.height = 25;\n        p.innerText = value.text;\n        div.appendChild(img);\n        div.appendChild(p);\n        document.getElementById('text-field').appendChild(div);\n      } else {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = value[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var msg = _step.value;\n\n            var _div = document.createElement('div');\n\n            var _p = document.createElement('span');\n\n            var _img = document.createElement('img');\n\n            _img.width = 25;\n            _img.height = 25;\n            _img.src = msg['avatar'] || '/public/img/avatar.jpg';\n            _p.innerText = msg['login'] + ':' + msg['text'];\n            if (msg['login'] != undefined) _div.appendChild(_img);\n\n            _div.appendChild(_p);\n\n            document.getElementById('text-field').appendChild(_div);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator[\"return\"] != null) {\n              _iterator[\"return\"]();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n      }\n\n      document.getElementById('text-field').scrollTop = 8000;\n    }\n    /**\n     * Inits route\n     */\n\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this8 = this;\n\n      this._subscriber.subscribeEvent('Msg', this._render);\n\n      this._subscriber.subscribeEvent('Msgs', this._render);\n\n      this._rootEl.innerHTML = Handlebars.templates['chat.html']();\n      var text = document.getElementById('pop-up');\n      text.addEventListener('submit', function (event) {\n        event.preventDefault();\n        _this8._form = event.target;\n        var msg = _this8._form.elements[\"text\"].value;\n\n        _this8._controller.sendMsg(msg);\n      });\n\n      this._controller.loadHistory();\n\n      _get(_getPrototypeOf(ChatRoute.prototype), \"init\", this).call(this);\n    }\n    /**\n     * Reverts route init\n     */\n\n  }, {\n    key: \"deinit\",\n    value: function deinit() {\n      this._subscriber.unsubscribeEvent('Msg', this._render);\n\n      this._subscriber.unsubscribeEvent('Msgs', this._render);\n\n      _get(_getPrototypeOf(ChatRoute.prototype), \"deinit\", this).call(this);\n    }\n  }]);\n\n  return ChatRoute;\n}(BaseRoute);\n\n\n\n//# sourceURL=webpack:///./public/modules/routes.js?");

/***/ }),

/***/ "./public/modules/utils.js":
/*!*********************************!*\
  !*** ./public/modules/utils.js ***!
  \*********************************/
/*! exports provided: showErrorMsg, clearErrors */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"showErrorMsg\", function() { return showErrorMsg; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clearErrors\", function() { return clearErrors; });\n\n/**\n * Shows the error message near the form's input field which contains\n *  statement caused the error\n * @param {HTMLFormElement} form - target form\n * @param {String} field - input field id\n * @param {String} errorMsg - error message\n */\n\nfunction showErrorMsg(form, field, errorMsg) {\n  var errorInput = form.elements[field];\n  var errorElement = document.createElement('p');\n  errorElement.setAttribute('style', 'margin: 0;');\n  errorElement.innerText = errorMsg;\n  errorInput.nextElementSibling.appendChild(errorElement);\n}\n/**\n * Clear all div blocks with error-msg class in this form, like a:\n * <div class=\"error-msg\"><p>error</p></div>\n * @param {HTMLFormElement} form - form to be cleaned\n */\n\n/**\n * Cleans error messages in the target form\n * @param {HTMLFormElement} form - form to be cleaned\n */\n\n\nfunction clearErrors(form) {\n  var errors = form.getElementsByClassName('error-msg');\n  Array.prototype.forEach.call(errors, function (element) {\n    element.innerHTML = '';\n  });\n}\n\n\n\n//# sourceURL=webpack:///./public/modules/utils.js?");

/***/ })

/******/ });